{% load static %}
{% if product %}
<div class="product-card border border-gray-300 rounded shadow-lg w-full" data-detail-url="{% url 'product-detail' product.id %}">
  <div class="product-image mb-2 relative">
    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-48 object-cover rounded" loading="lazy" />
    <button
      class="favorite-btn absolute top-2 right-2 bg-[rgba(0,0,0,0.3)] p-2 rounded-full shadow hover:bg-[rgba(0,0,0,0.5)] cursor-pointer"
      data-url="{% url 'toggle-favorite' product.id %}"
      data-product-id="{{ product.id }}"
    >
      {% if product.id in request.wishlist %}
      <i class="bi bi-heart-fill text-red-500"></i>
      {% else %}
      <i class="bi bi-heart text-white"></i>
      {% endif %}
    </button>
  </div>
  <div class="p-4">
    <h3 class="text-lg font-semibold mb-2 text-gray-700">{{ product.name }}</h3>
    <p class="text-gray-600">{{ product.description }}</p>
    <p class="text-green-600 font-bold">${{ product.price }}</p>
    <hr class="my-2 text-gray-500" />
    <div class="flex justify-center items-center">
      <button
        class="add-cart-btn mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 cursor-pointer"
        data-url="{% url 'add-to-cart' product.id %}"
        aria-label="Add {{ product.name }} to cart"
      >
        <i class="bi bi-cart-plus"></i> Add to Cart
      </button>
    </div>
  </div>
</div>
<script src="{% static 'js/utils.js' %}"></script>
<script src="{% static 'js/products.js' %}"></script>
{% endif %}
