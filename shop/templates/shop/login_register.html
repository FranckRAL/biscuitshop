<!-- filepath: d:\bureau\informatique\2025\python\learnDjango\biscuitshop\shop\templates\shop\login_register.html -->
{% extends "shop/main.html" %}
{% load static %}

{% block title %}
  {% if page == 'login' %}Login{% else %}Register{% endif %} - Biscuit Shop
{% endblock %}

{% block content %}
<div class="container mx-auto p-4 max-w-md">
    
    {% if messages %}
    <div class="mb-4">
        {% for message in messages %}
        <div class="p-3 rounded mb-2 {% if message.tags %}{{ message.tags }}{% endif %}"
             style="{% if message.tags == 'error' %}background-color: #fee; color: #c33;{% elif message.tags == 'success' %}background-color: #efe; color: #3c3;{% else %}background-color: #eef; color: #33c;{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if page == 'login' %}
    <h1 class="text-blue-500 text-center quicksand-bold ">Login</h1>
    {% else %}
    <h1 class="text-blue-500 text-center quicksand-bold">Register</h1>
    {% endif %}

    <form method="POST" class="bg-white p-6 rounded shadow-lg">
        {% csrf_token %}
        
        {% for field in form %}
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2" for="{{ field.id_for_label }}">
                    {{ field.label }}
                </label>
                {{ field }}
                {% if field.errors %}
                    <ul class="text-red-600 text-sm mt-2">
                        {% for error in field.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        {% endfor %}

        <button type="submit" class="primary-btn">
            {% if page == 'login' %}Login{% else %}Register{% endif %}
        </button>
    </form>

    <p class="text-center mt-4 text-gray-600">
        {% if page == 'login' %}
        Don't have an account? <a href="{% url 'register' %}" class="text-blue-500 hover:underline">Register here</a>
        {% else %}
        Already have an account? <a href="{% url 'login' %}" class="text-blue-500 hover:underline">Login here</a>
        {% endif %}
    </p>
</div>
{% endblock %}